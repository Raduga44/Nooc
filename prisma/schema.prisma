// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"  
  url      = env("DATABASE_URL")
}

// 投稿データの定義
model Post {
  id          Int      @id @default(autoincrement())
  title       String   // タイトル
  imageUrl    String   // メイン画像の保存パス
  caption     String?  // 説明文
  isTechnical Boolean  @default(false) // 技術公開モードかどうか
  
  // 技術公開時の工程（1つの投稿に複数の工程を紐づける）
  steps       Step[]

  // 人気順・おすすめ計算用
  views       Int      @default(0)
  createdAt   DateTime @default(now())
}

// 工程データの定義
model Step {
  id          Int    @id @default(autoincrement())
  order       Int    // 順番 (1, 2, 3...)
  description String // 説明文
  imagePath   String // 工程ごとの画像パス
  postId      Int
  post        Post   @relation(fields: [postId], references: [id])
}